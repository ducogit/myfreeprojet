<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Log.1.0</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">

    <link href="../image/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="../image/remixicon/remixicon.css" rel="stylesheet">
    <link href="../css/bootstrap.min.css" rel="stylesheet" >

    <link href="../css/print.min.css" rel="stylesheet">
    <link href="../css/simplebar.css" rel="stylesheet">
    <link href="../css/styles.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">

</head>
<body style="background-color: transparent">

<!-- *********************************************** content *********************************** -->

<div class="container-fluid" style="height: 100vh;padding-top: 20px">

    <!--<div class="row mb-1">
        <div class="col-12 mt-1">
            <div class="boutons_modals head" style="padding-right: 0">
                <ul class="ul-nav">
                    <li class="d-flex" style="display: flex;justify-content: left">
                        <h4 style="color: #aaa;font-size: 18px;font-family: cursive;font-weight: 700;">Inscription d'un résident</h4>
                    </li>
                </ul>
                <ul class="ul-nav" style="margin-right: 0">
                    <li class="ul-li-nav search" style="margin-right: 0">
                        <div class="input-group inputSearchStock" id="inputSearch">
                            <input type="text" required class="form-control dropdown-toggle" placeholder="Search..." id="input-search-stock">
                            <button id="btn-search-stick" class="input-group-text btn-primary" type="submit"><i class="ri ri-search-2-line"></i></button>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <hr>-->
    <div class="row" style="margin: 6px">
        <div class="container-fluid" style="background: rgba(17,19,33,1);width: 100%;height: 85vh;border-radius: 5px;padding: 5px" data-simplebar>
            <div class="modal-content" style="background: transparent;border: none">
                <div class="modal-header" style="padding: 2px 15px;background: linear-gradient(90deg, rgb(2,15,50), rgb(12,1,15));">
                    <h6 class="modal-title" style="font-size: 14px;font-weight: 700;color: #aaa">INSCRIPTION DES RESIDENT</h6>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>
                </div>
                <div class="modal-body" style="padding: 0 10px">
                    <form class="modal-content" method="post" th:action="@{/SaveInscription}" enctype="multipart/form-data" style="background: transparent;border: none">
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 mb-0">
                                <div class="modal-content" style="background: transparent;border: none">
                                    <div class="modal-body">
                                        <div class="mb-2">
                                            <label for="inputNomResident" class="form-label">Nom</label>
                                            <input name="inputNomResident" type="text" id="inputNomResident" class="form-control">
                                        </div>
                                        <div class="mb-2">
                                            <div class="row">
                                                <div class="col-12">
                                                    <label for="inputPrenomResident" class="form-label">Prénoms</label>
                                                    <input name="inputPrenomResident" type="text" id="inputPrenomResident" class="form-control">
                                                </div>
                                            </div>
                                            <input type="hidden">
                                        </div>
                                        <div class="mb-2">
                                            <div class="row">
                                                <div class="col-12">
                                                    <label for="sexeResident" class="form-label">Sèxe</label>
                                                    <select name="sexeResident" type="text" id="sexeResident" class="form-select" style="width: 100%;height: 35px">
                                                        <option value="Masculin">Masculin</option>
                                                        <option value="Féminin">Féminin</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mb-2">
                                            <div class="row">
                                                <div class="col-6">
                                                    <label for="dateNaisse" class="form-label">Date de naissance</label>
                                                    <input type="date" name="dateNaisse" id="dateNaisse" class="form-control">
                                                </div>
                                                <div class="col-6">
                                                    <label for="lieuNaisse" class="form-label">Lieu de naissance</label>
                                                    <input name="lieuNaisse" id="lieuNaisse" class="form-control">
                                                </div>
                                            </div>

                                        </div>
                                        <div class="mb-2">
                                            <label for="adresseResident" class="form-label">Adresse</label>
                                            <input name="adresseResident" id="adresseResident" class="form-control">
                                        </div>
                                        <div class="mb-4">
                                            <label for="nationaliteResident" class="form-label">Nationalité</label>
                                            <input name="nationaliteResident" id="nationaliteResident" class="form-control">
                                        </div>
                                        <div class="mt-2">
                                            <div class="inputfile-box" style="height: 34px">
                                                <input type="file" multiple="multiple" id="file" name="photoResident" class="inputfile" onchange='uploadFile(this)'>
                                                <label for="file" style="background: rgba(24,26,30,0.4);width: 93%;height: 34px;">
                                                    <span id="file-name" class="file-box"></span>
                                                    <span class="file-button"><i class="fa fa-upload" aria-hidden="true" style="margin-right: 5px;"></i>Image</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 mt-0">
                                <div class="modal-content" style="background: transparent;border: none">
                                    <div class="modal-body mb-4">
                                        <div class="mb-4">
                                            <label for="filiereResident" class="form-label">Filière</label>
                                            <select name="filiereResident" id="filiereResident" class="form-select" style="width: 100%;height: 35px">
                                                <option value="DROIT">DROIT</option>
                                                <option value="ECONOMIE">ECONOMIE</option>
                                                <option value="GESTION">GESTION</option>
                                                <option value="MIA">MIA</option>
                                                <option value="PHILOSOPHIE">PHILOSOPHIE</option>
                                                <option value="HISTOIRE">HISTOIRE</option>
                                                <option value="GEOGRAPHIE">GEOGRAPHIE</option>
                                                <option value="ISSEDD">ISSEDD</option>
                                                <option value="LETTRE FRANCAISE">LETTRE FRANCAISE</option>
                                                <option value="ENTROPOLOGIE">ENTROPOLOGIE</option>
                                                <option value="MEDICINE">MEDICINE</option>
                                                <option value="TOURISME">TOURISME</option>
                                            </select>
                                        </div>
                                        <div style="margin-bottom: 25px">
                                            <div class="row">
                                                <div class="col-4">
                                                    <label for="serieBacc" class="form-label">Série du Bacc</label>
                                                    <input name="serieBacc" id="serieBacc" class="form-control">
                                                </div>
                                                <div class="col-4">
                                                    <label for="anneeBacc" class="form-label">Année du Bacc</label>
                                                    <input type="text" name="anneeBacc" id="anneeBacc" class="form-control">
                                                </div>
                                                <div class="col-4">
                                                    <label for="anneeInscription" class="form-label">Année d'inscription</label>
                                                    <input type="text" name="anneeInscription" id="anneeInscription" class="form-control">
                                                </div>
                                            </div>

                                        </div>
                                        <h6 class="modal-title" style="margin-top: 20px;font-size: 14px;font-weight: 700;color: #aaa">CHAMBRE INFORMATION</h6>
                                        <hr style="margin-top: 5px;">
                                        <div class="mb-2">
                                            <div class="row">
                                                <div class="col-12">
                                                    <label for="nomBloc" class="form-label">Nom du bloc</label>
                                                    <select name="nomBloc" id="nomBloc" class="form-select" style="width: 100%;height: 35px">
                                                        <option th:each="bloc:${blocList}" th:value="${bloc.getNomBloc()}" th:text="${bloc.getNomBloc()}"></option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mb-2">
                                            <div class="row">
                                                <div class="col-12">
                                                    <label for="numeroChambre" class="form-label">Chambre disponible</label>
                                                    <select name="numeroChambre" id="numeroChambre" class="form-select" style="width: 100%;height: 35px">
                                                        <option></option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <hr style="margin-top: 25px;margin-bottom: 0">
                                    </div>
                                    <div class="modal-footer mt-2" style="display: block;padding: 10px 0 0 0;border: none">
                                        <div class="row" style="margin: 0 0 15px 0">
                                            <div class="col-6">
                                                <button id="btnAnnulerInscription" type="button" class="btn btn-danger" style="width: 100%;height: 50px">Annuler</button>
                                            </div>
                                            <div class="col-6">
                                                <button id="btnEnregistrerInscription" type="submit" class="btn btn-primary btn-enregistrer" style="width: 100%;height: 50px">Enregistrer</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

</div>

<!-------------------------------------------------------------------- script ------------------------------->

<script src="../js/jquery-3.5.1.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/table2excel.js"></script>
<script src="../js/print.min.js"></script>
<script src="../js/simplebar.min.js"></script>

<script>

    /* ---------------------------- change select ------------------------------------- */
    var blocSelect = document.getElementById("nomBloc");
    blocSelect.addEventListener('change',function (){
        console.log(blocSelect.value)
        $.ajax({
            type: "GET",
            url : "/GetAllChambreByBloc?nomBloc="+blocSelect.value,
            success: function (result) {
                if (result.status === "success") {
                    var selectB = document.getElementById("numeroChambre");
                    var optionB = selectB.querySelectorAll("option");
                    for (var i=0;i<optionB.length;i++) {
                        optionB[i].remove();
                    }
                    if (result.data.length !== 0) {
                        $.each(result.data, function (i, chambre) {

                            var nouvelleOption = document.createElement("option");
                            nouvelleOption.value = chambre.numeroChambre;
                            nouvelleOption.appendChild(document.createTextNode(chambre.numeroChambre))
                            selectB.appendChild(nouvelleOption);
                            if (chambre.nbrPlaceLibre === 0){
                                nouvelleOption.style.display="none";
                            }
                            else {
                                nouvelleOption.style.display="";
                            }

                        });
                    }else {
                        console.log("vide")
                        var nouvelleOption1 = document.createElement("option");
                        nouvelleOption1.value = "Aucune chambre disponible";
                        nouvelleOption1.appendChild(document.createTextNode("Aucune chambre disponible"))
                        selectB.appendChild(nouvelleOption1);
                    }
                }
            },
            error: function (e){
                alert("erreur e : "+e);
            }
        })
    })


    /* ---------- Fin Plus Produit -------------- */
    function uploadFile(target) {
        document.getElementById("file-name").innerHTML = target.files[0].name;
    }
    /* *************************** filtrage du tableau ************************************ */
    /*var inputSearch = document.getElementById("input-search-stock");
    inputSearch.addEventListener("keyup",function(){
        var keyword = this.value;
        keyword = keyword.toUpperCase();
        var table_3 = document.getElementById("datatable-buttons");
        var all_tr = table_3.getElementsByTagName("tr");
        for(var i=0; i<all_tr.length; i++){
            var all_columns = all_tr[i].getElementsByTagName("td");
            for(j=0;j<all_columns.length; j++){
                if(all_columns[j]){
                    var column_value = all_columns[j].textContent || all_columns[j].innerText;
                    column_value = column_value.toUpperCase();
                    if(column_value.indexOf(keyword) > -1){
                        all_tr[i].style.display = ""; // show
                        break;
                    }else{
                        all_tr[i].style.display = "none"; // hide
                    }
                }
            }
        }
    })*/

    /* ****************** print pageListe client *************************************** */

    /*var boutonImprimerUser = document.getElementById("btnPrintUtilisateur");
    boutonImprimerUser.addEventListener('click',printUserAction);
    function printUserAction() {
        printJS({
            printable: 'datatable-utilisateurImprimer2',
            type: 'html',
            targetStyles: ['*']
        });
    }*/

    /* ********************** exporter tableClient vers excel ******************************** */

    /*var boutonExcelUser = document.getElementById("btnExcelUtilisateur");
    boutonExcelUser.addEventListener('click',Export);
    function Export() {
        $("#datatable-utilisateurImprimer2").table2excel({
            filename: "Utilisateur_Liste "+new Date().getFullYear()+"-"+new Date().getMonth()+"-"+new Date().getDate()+" "+new Date().getHours()+"h"+new Date().getMinutes()+"min .xls"
        });
    }*/

</script>

</body>
</html>